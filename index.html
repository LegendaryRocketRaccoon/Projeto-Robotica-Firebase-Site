<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Painel de Controle - Firebase</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f7fa;
      padding: 20px;
      text-align: center;
    }
    h1 {
      color: #007bff;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    button {
      padding: 12px;
      border: none;
      background-color: #007bff;
      color: white;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background-color: #0056b3;
    }
    .info {
      margin-top: 30px;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <h1>Controle da M√°quina (Firebase)</h1>

  <h2>Processo Autom√°tico</h2>
  <div class="grid">
    <button onclick="enviarComando('ligarProcesso')">‚ñ∂ Iniciar Processo</button>
  </div>

  <h2>Atuadores Manuais</h2>
  <div class="grid">
    <button onclick="enviarComando('ligarEsteira')">Ligar Esteira</button>
    <button onclick="enviarComando('desligarEsteira')">Desligar Esteira</button>
    <button onclick="enviarComando('ligarSeparador')">Ligar Separador</button>
    <button onclick="enviarComando('desligarSeparador')">Desligar Separador</button>
    <button onclick="enviarComando('ligarTrava')">Ligar Trava</button>
    <button onclick="enviarComando('desligarTrava')">Desligar Trava</button>
    <button onclick="enviarComando('ligarMedidor')">Ligar Medidor</button>
    <button onclick="enviarComando('desligarMedidor')">Desligar Medidor</button>
    <button onclick="enviarComando('ligarMagazine')">Ligar Magazine</button>
    <button onclick="enviarComando('desligarMagazine')">Desligar Magazine</button>
  </div>

  <div class="info">
    <p><strong>Tempo decorrido:</strong> <span id="tempo">0</span> segundos</p>
    <p><strong>Pe√ßas met√°licas:</strong> <span id="metal">0</span></p>
    <p><strong>Pe√ßas pl√°sticas:</strong> <span id="plastico">0</span></p>
  </div>

  <!-- Firebase SDK -->
  <script type="module">
    // IMPORTAR SDK
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-app.js";
    import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-database.js";

    // üîß SUA CONFIGURA√á√ÉO AQUI
    const firebaseConfig = {
      apiKey: "AIzaSyAdKDXizjq1CKXLMocwbqMAgF3cvS6aYn4",
      authDomain: "projetoglo.firebaseapp.com",
      databaseURL: "https://projetoglo-default-rtdb.firebaseio.com",
      projectId: "projetoglo",
      storageBucket: "projetoglo.firebasestorage.app",
      messagingSenderId: "340106773490",
      appId: "1:340106773490:web:7300e7a6d9f23215a7216b",
      measurementId: "G-SHR92S2H06"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    function enviarComando(cmd) {
      set(ref(db, "/comando"), cmd)
        .then(() => console.log("Comando enviado:", cmd))
        .catch((error) => console.error("Erro ao enviar comando:", error));
    }

    // Torna a fun√ß√£o vis√≠vel ao escopo global
    window.enviarComando = enviarComando;

    // Atualiza√ß√µes em tempo real
    onValue(ref(db, "/tempo"), (snapshot) => {
      document.getElementById("tempo").innerText = snapshot.val() || 0;
    });

    onValue(ref(db, "/contador/metal"), (snapshot) => {
      document.getElementById("metal").innerText = snapshot.val() || 0;
    });

    onValue(ref(db, "/contador/plastico"), (snapshot) => {
      document.getElementById("plastico").innerText = snapshot.val() || 0;
    });
  </script>
</body>
</html>